!function(){var e={picker:"$/proton/multi-list-picker/picker.html"},t=angular.module("proton.multi-list-picker",[]);t.run(["$templateCache",function(t){t.put(e.picker,"<div class='proton-multi-list-picker {{attachment}}' mn-touch data-swipe-up='swipe($event)' data-swipe-down='swipe($event)'>\n    <span ng-transclude class='proton-multi-list-picker-contents'></span>\n    <div class='before'></div>\n    <ul class='lists'>\n        <li ng-repeat='list in items track by $index' class='list-container' data-index='{{$index}}'>\n            <span class='divider' ng-if='list.$divider'>\n                <span ng-if='!bindHtml' ng-bind='list.$divider'></span>\n                <span ng-if='bindHtml' ng-bind-html='list.$divider'></span>\n            </span>\n            <ul class='list' ng-if='!list.$divider'>\n                <li class='item {{item.index == list.selected ? \"selected\" : \"offset-\" + ($index &gt; 3 ? $index - 3 : 3 - $index)}}' ng-repeat='item in list.view track by $index' mn-touch data-secure-tap='select(list, item.index)'>\n                    <span ng-if='!bindHtml' ng-bind='item.label'></span>\n                    <span ng-if='bindHtml' ng-bind-html='item.label'></span>\n                </li>\n            </ul>\n        </li>\n    </ul>\n    <div class='after'></div>\n</div>")}]),t.directive("protonMultiListPicker",["$parse","$filter","$timeout",function(t,i,n){var l=function(e){e.items=[],this.addDivider=function(t){e.items.push({$divider:t})},this.add=function(t){t.alias||(t.alias=e.items.length),e.items.push(t)}};return{restrict:"E",replace:!0,templateUrl:e.picker,require:"?ngModel",controllerAs:"controller",scope:{},transclude:!0,controller:["$scope",l],link:function(e,l,r,a){var s=(e.controller,l.parent().scope());e.attachment="bottom",r.$observe("attachment",function(t){e.attachment=t||"bottom"}),e.bindHtml=!1,r.$observe("bindHtml",function(t){e.bindHtml="true"==t}),e.model=null,e.$watch(function(){return t(r.ngModel)(s)},function(t){e.model=t,angular.forEach(e.items,function(n){if(!n.$divider){var l;l=angular.isUndefined(t[n.alias])?0:e.selected(n.alias,i("protonMultiListArrayOf")(n.source())),e.select(n,l)}})},!0),e.value=function(e,t){return e.index<=t||0>t?null:e[t].value},e.select=function(t,n){t.selected=n,t.array=i("protonMultiListArrayOf")(t.source()),t.view=i("protonMultiListView")(t.array,n),e.model[t.alias]=e.value(t.array,n)},e.selected=function(t,i){var n=e.model[t],l=-1;return angular.forEach(i,function(e,t){l>-1||(angular.isObject(e)&&angular.isDefined(e.value)&&n==e.value&&(l=t),angular.isObject(e)&&angular.isDefined(e.value)||n!=e||(l=t))}),l>-1?l:0},e.swipe=function(t){for(var l=angular.element(t.events.start.target);l.length&&!l.hasClass("list-container");)l=l.parent();if(l.length){var r=l.attr("data-index"),a=e.items[r],s=Math.max(1,Math.abs(Math.floor(t.directionY/40))),u=i("protonMultiListArrayOf")(a.source()),o=e.selected(a.alias,u);!function c(i){n(function(){t.directionY<0?(o++,o==u.length&&(o=0)):(o--,0>o&&(o=u.length-1)),e.select(a,o),s--,s>0&&c(Math.floor(1.1*i))},i)}(200/s)}}}}}]),t.directive("protonMultiListPickerList",[function(){var e=function(e){e.items=[],this.add=function(t){e.items.push(t)}};return{scope:{source:"&?",alias:"@?"},restrict:"E",require:"^protonMultiListPicker",controller:["$scope",e],link:function(e,t,i,n){n.add({source:function(){return e.source&&e.source()||e.items},alias:e.alias})}}}]),t.directive("protonMultiListPickerDivider",[function(){return{restrict:"E",require:"^protonMultiListPicker",link:function(e,t,i,n){n.addDivider(t.html())}}}]),t.directive("protonMultiListPickerListItem",[function(){return{restrict:"E",require:"^protonMultiListPickerList",link:function(e,t,i,n){n.add({value:i.value||t.html(),label:t.html()})}}}]),t.filter("protonMultiListView",[function(){return function(e,t){var i,n=t,l=Math.max(n-3,0),r=Math.min(n+3,e.length-1),a=[];for(i=l;r>=i;i++)a.push({label:e[i].label,value:e[i].value,index:i});if(e.length>=7&&a.length<7){var s=7-a.length;if(0==l&&(s=-1*s),0>s)for(i=e.length+s;i<e.length;i++)a.splice(i-e.length-s,0,{label:e[i].label,value:e[i].value,index:i});else if(s>0)for(i=0;s>i;i++)a.push({label:e[i].label,value:e[i].value,index:i})}else if(a.length<7){for(var u=e.length-1;3>n;)a.splice(0,0,e[u]),e[u].index=u,u--,0>u&&(u=e.length-1),n++;for(u=0;a.length<7;)a.push(e[u]),e[u].index=u,u++,u==e.length&&(u=0)}return a}}]),t.filter("protonMultiListArrayOf",[function(){return function(e){var t;return angular.isArray(e)?(t=[],angular.forEach(e,function(e){angular.isObject(e)&&angular.isDefined(e.label)&&angular.isDefined(e.value)?t.push(e):t.push({label:e,value:e})}),t):angular.isObject(e)?(t=[],angular.forEach(e,function(e,i){t.push({value:i,label:e})}),t.sort(function(e,t){return e.label<t.label?-1:1}),t):[e]}}])}();