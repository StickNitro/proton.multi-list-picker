!function(){var e={picker:"$/proton/multi-list-picker/picker.html"},t=angular.module("proton.multi-list-picker",[]);t.run(["$templateCache",function(t){t.put(e.picker,"<div class='proton-multi-list-picker {{attachment}}'>\n    <span ng-transclude class='proton-multi-list-picker-contents'></span>\n    <div class='first'></div>\n    <div class='before'></div>\n    <ul class='lists'>\n        <li ng-repeat='list in items track by $index' class='list-container' data-index='{{$index}}'>\n            <span class='divider' ng-if='list.$divider'>\n                <span ng-if='!bindHtml' ng-bind='list.$divider'></span>\n                <span ng-if='bindHtml' ng-bind-html='list.$divider'></span>\n            </span>\n            <ul class='list' ng-if='!list.$divider' proton-multi-list-motion data-start='testStart($event)' data-move='testStart($event)' data-end='testStart($event)'>\n                <li class='item {{$index == 3 ? \"selected\" : \"offset-\" + ($index &gt; 3 ? $index - 3 : 3 - $index)}}' ng-repeat='item in list.array track by $index'>\n                    <span ng-if='!bindHtml' ng-bind='item.label'></span>\n                    <span ng-if='bindHtml' ng-bind-html='item.label'></span>\n                </li>\n            </ul>\n        </li>\n    </ul>\n    <div class='after'></div>\n    <div class='last'></div>\n</div>")}]),t.directive("protonMultiListPicker",["$parse","$filter","$timeout",function(t,n,i){var a=function(e){e.items=[],this.addDivider=function(t){e.items.push({$divider:t})},this.add=function(t){t.alias||(t.alias=e.items.length),t.index=e.items.length,e.items.push(t),e.$watch(function(){return t.source()},function(){e.$broadcast("protonMultiListPicker:changed",t)},!0)}};return{restrict:"E",replace:!0,templateUrl:e.picker,require:"?ngModel",scope:{},transclude:!0,controller:["$scope",a],link:function(e,n,i){var a=n.parent().scope();e.$watch(function(){return t(i.ngModel)(a)},function(t){e.model=t,e.$broadcast("protonMultiListPicker:changed",t)}),i.$observe("bindHtml",function(t){e.bindHtml="true"==t}),e.$on("protonMultiListPicker:changed",function(){angular.forEach(e.items,function(e){if(!angular.isDefined(e.$divider)){var t,n=angular.copy(e.source());angular.isArray(n)?t=n:(t=[],angular.isObject(n)?angular.forEach(n,function(e,n){t.push({label:e,value:n})}):t.push({label:n,value:n})),n=t,t=[],angular.forEach(n,function(e,n){e.index=n,angular.isObject(e)&&angular.isDefined(e.label)&&angular.isDefined(e.value)?t.push(e):t.push({label:e,value:e})}),e.array=t,e.selected=0}}),angular.isObject(e.model)&&(angular.forEach(e.items,function(t){t.$divider||angular.isUndefined(e.model[t.alias])&&(e.model[t.alias]=t.array[0].value)}),angular.forEach(e.items,function(t){t.$divider||(t.selected=-1,angular.forEach(t.array,function(n,i){t.selected>-1||n.value==e.model[t.alias]&&(t.selected=i)}))}))}),e.select=function(t,n){angular.isObject(e.model)&&(e.model[t.alias]=t.array[n].value)}}}}]),t.directive("protonMultiListPickerList",[function(){var e=function(e){e.items=[],this.add=function(t){e.items.push(t)}};return{scope:{source:"&?",alias:"@?",cycle:"@?"},restrict:"E",require:"^protonMultiListPicker",controller:["$scope",e],link:function(e,t,n,i){i.add({source:function(){return e.source&&e.source()||e.items},alias:e.alias,cycle:"true"==e.cycle})}}}]),t.directive("protonMultiListPickerDivider",[function(){return{restrict:"E",require:"^protonMultiListPicker",link:function(e,t,n,i){i.addDivider(t.html())}}}]),t.directive("protonMultiListPickerListItem",[function(){return{restrict:"E",require:"^protonMultiListPickerList",link:function(e,t,n,i){i.add({value:n.value||t.html(),label:t.html()})}}}]),t.filter("protonMultiListView",[function(){return function(e,t){var n,i=t,a=Math.max(i-3,0),s=Math.min(i+3,e.length-1),l=[];for(n=a;s>=n;n++)l.push({label:e[n].label,value:e[n].value,index:n});if(e.length>=7&&l.length<7){var r=7-l.length;if(0==a&&(r=-1*r),0>r)for(n=e.length+r;n<e.length;n++)l.splice(n-e.length-r,0,{label:e[n].label,value:e[n].value,index:n});else if(r>0)for(n=0;r>n;n++)l.push({label:e[n].label,value:e[n].value,index:n})}else if(l.length<7){for(var o=e.length-1;3>i;)l.splice(0,0,e[o]),e[o].index=o,o--,0>o&&(o=e.length-1),i++;for(o=0;l.length<7;)l.push(e[o]),e[o].index=o,o++,o==e.length&&(o=0)}return l}}]),t.filter("protonMultiListArrayOf",[function(){return function(e){var t;return angular.isArray(e)?(t=[],angular.forEach(e,function(e){angular.isObject(e)&&angular.isDefined(e.label)&&angular.isDefined(e.value)?t.push(e):t.push({label:e,value:e})}),t):angular.isObject(e)?(t=[],angular.forEach(e,function(e,n){t.push({value:n,label:e})}),t.sort(function(e,t){return e.label<t.label?-1:1}),t):[e]}}]),t.service("protonMultiListMomentum",[function(){var e=function(e){return{event:e,type:e.touches?"Touch":"Mouse",x:e.touches?e.touches[0].screenX:e.screenX,y:e.touches?e.touches[0].screenY:e.screenY,target:e.touches?e.touches[0].target:e.target,timestamp:Date.now(),xDisplacement:0,yDisplacement:0,speedX:0,speedY:0,speedXState:"stopped",speedYState:"stopped",accelerationX:0,accelerationY:0,speed:0,acceleration:0,angle:NaN,origin:t?t.origin?t.origin:t:null}},t=null;this.start=function(n,i){n.touches&&n.touches.length>1||(t=e(n),angular.isFunction(i)&&i(t))},this.move=function(n,i){if(null!==t){var a=e(n),s=a.timestamp-t.timestamp,l=a.x-t.x,r=a.y-t.y;a.xDisplacement=l,a.yDisplacement=r,a.angle=Math.atan2(a.x,a.y),0==s?(0==l?(a.speedX=0,a.speedXState="stopped"):(a.speedX=Math.sign(l)*(1/0),a.speedXState="fast"),0==r?(a.speedY=0,a.speedYState="stopped"):(a.speedY=Math.sign(r)*(1/0),a.speedYState="fast")):(a.speedX=l/s,a.speedY=r/s,Math.abs(a.speedX)<.2?a.speedXState="slow":Math.abs(a.speedX)<.6?a.speedXState="moderate":a.speedXState="fast",Math.abs(a.speedY)<.2?a.speedYState="slow":Math.abs(a.speedY)<.6?a.speedYState="moderate":a.speedYState="fast");var o=a.speedX-t.speedX,c=a.speedY-t.speedY;0==s?(0==o?a.accelerationX=0:a.accelerationX=Math.sign(o)*(1/0),0==c?a.accelerationY=0:a.accelerationY=Math.sign(c)*(1/0)):(a.accelerationX=o/s,a.accelerationY=c/s),a.speed=Math.sqrt(Math.pow(a.speedX,2)+Math.pow(a.speedY,2)),a.acceleration=Math.sqrt(Math.pow(a.accelerationX,2)+Math.pow(a.accelerationY,2)),t=a,angular.isFunction(i)&&i(t)}},this.end=function(e,n){null!==t&&(angular.isFunction(n)&&n(t),t=null)}}]),t.directive("protonMultiListMotion",["protonMultiListMomentum",function(e){return{restrict:"A",scope:{move:"&?move",end:"&?end",start:"&?start"},link:function(t,n){n.on("mousedown touchstart",function(n){e.start(n,function(e){t.start&&t.start({$event:e})})}),n.on("mousemove touchmove",function(n){e.move(n,function(e){t.move&&t.move({$event:e})})}),n.on("mouseup touchend touchcancel",function(n){e.end(n,function(e){t.end&&t.end({$event:e})})})}}}])}();